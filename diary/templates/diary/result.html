{% extends "diary/base.html" %}
{% block content %}

<!-- ===== NAVBAR ===== -->
<div class="navbar">
  <div class="nav-left">
    <a href="{% url 'log_mood' %}">ğŸ“ ÎÎ­Î± ÎšÎ±Ï„Î±Î³ÏÎ±Ï†Î®</a>
    <a href="{% url 'history' %}">ğŸ“œ Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ</a>
    <a href="{% url 'stats' %}">ğŸ“Š Î£Ï„Î±Ï„Î¹ÏƒÏ„Î¹ÎºÎ¬</a>
  </div>

  <div class="nav-right">
    <button onclick="toggleDarkMode()">ğŸŒ™</button>
    <a href="{% url 'logout' %}">ğŸšª Î‘Ï€Î¿ÏƒÏÎ½Î´ÎµÏƒÎ·</a>
  </div>
</div>

<div class="result-wrapper">
    <div class="result-card fade-in">

        <div class="icon">ğŸ§ </div>
        <h2>Î‘Ï€Î¿Ï„Î­Î»ÎµÏƒÎ¼Î± Î‘Î½Î¬Î»Ï…ÏƒÎ·Ï‚</h2>

        <p class="emotion-text">
            {{ emotion }}
        </p>

        <div class="result-score-box">
            <p class="score-label">ğŸ”¥ ÎˆÎ½Ï„Î±ÏƒÎ· Î£Ï…Î½Î±Î¹ÏƒÎ¸Î®Î¼Î±Ï„Î¿Ï‚</p>

            <div class="score-bar">
                <div
                    class="score-fill {{ score_class }}"
                    data-score="{{ score_percent|default:0 }}">
                </div>
            </div>

            <div class="score-number">
                {{ score }} / 10
            </div>
        </div>

        <a href="{% url 'log_mood' %}" class="btn-primary">
            â• ÎÎ­Î± Î‘Î¾Î¹Î¿Î»ÏŒÎ³Î·ÏƒÎ·
        </a>

    </div>
</div>

<style>
.navbar{
    position:sticky;
    top:0;
    width:100%;
    height:70px;
    background:#2b2b2b;
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 30px;
    box-shadow:0 6px 20px rgba(0,0,0,0.25);
    z-index:1000;
}

.navbar a{
    color:white;
    text-decoration:none;
    font-weight:700;
    margin-right:15px;
}

.nav-right button,
.nav-right a{
    background:transparent;
    border:1px solid #ccc;
    color:white;
    padding:6px 14px;
    border-radius:14px;
    cursor:pointer;
    margin-left:8px;
    font-weight:600;
}

.result-wrapper{
    display:flex;
    justify-content:center;
    padding:60px 0;
}

.result-card{
    background:white;
    max-width:520px;
    width:100%;
    padding:45px;
    border-radius:26px;
    text-align:center;
    box-shadow:0 18px 45px rgba(0,0,0,0.18);
}

.icon{font-size:46px;margin-bottom:10px;}

.emotion-text{
    font-size:28px;
    font-weight:800;
    color:#7b3b65;
    margin-bottom:30px;
}
.score-label{
    font-weight:600;
    margin-bottom:10px;
}

.score-bar{
    height:14px;
    background:#eee;
    border-radius:10px;
    overflow:hidden;
}

.score-fill{
    height:100%;
    width:0;
    transition:width 0.8s ease;
}

.score-fill.low{background:#2ecc71;}
.score-fill.medium{background:#f1c40f;}
.score-fill.high{background:#e67e22;}
.score-fill.extreme{background:#e74c3c;}

.score-number{
    margin-top:12px;
    font-size:20px;
    font-weight:700;
}

.btn-primary{
    display:inline-block;
    margin-top:30px;
    padding:14px 30px;
    border-radius:24px;
    background:linear-gradient(135deg,#7b3b65,#9e4e79);
    color:white;
    text-decoration:none;
    font-weight:700;
}


body.dark{
    background:#1e1e1e;
    color:white;
}

body.dark .result-card{
    background:#2c2c2c;
}

body.dark .navbar{
    background:#111;
}

.fade-in{
    animation:fadeUp .6s ease;
}

@keyframes fadeUp{
    from{opacity:0;transform:translateY(25px);}
    to{opacity:1;transform:translateY(0);}
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const bar = document.querySelector(".score-fill");
    if (bar) {
        const score = bar.dataset.score || 0;
        bar.style.width = score + "%";
    }
});

function toggleDarkMode(){
    document.body.classList.toggle("dark");
    localStorage.setItem("dark", document.body.classList.contains("dark"));
}
if(localStorage.getItem("dark")==="true"){
    document.body.classList.add("dark");
}
</script>

{% endblock %}
